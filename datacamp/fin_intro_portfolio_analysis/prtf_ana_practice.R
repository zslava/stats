rm(list=ls());  setwd('~/Dropbox/cs/bigdata/datacamp/fin_intro_portfolio_analysis/'); source('prtf_ana_practice.R')

require(xts)
require(quantmod)
require(PerformanceAnalytics)


##load aaple, msft data
tkr<-new.env()
getSymbols(c('AAPL','MSFT'), env=tkr, src="yahoo", from=as.Date("2006-01-01"),to=as.Date("2016-08-31"))


prices<-cbind(Ad(tkr$AAPL), Ad(tkr$MSFT))
returns<-Return.calculate(prices)
returns<-returns[-1,] #remove first NA line


###sp500 example

getSymbols("^GSPC", env=tkr, src = "yahoo", from = as.Date("1985-12-31") )
sp500d <- Ad(tkr$GSPC)
sp500_monthly<-Cl(to.monthly(sp500d)) #convert daily to monthy
sp500_returns <- Return.calculate(sp500_monthly)


### 1-month treasury bills from FRED
options(download.file.method="wget")
getSymbols('DGS1MO', env=tkr,src='FRED', from=as.Date("1986-01-01"))
trf<-tkr$DGS1MO
rf<-to.monthy(trf*0.01) # convert to pct


##Driver 2: The choice of portfolio weights

##prepare equity_returns  and bond_returns  xts objs 
eq_n<-c(0.0218224207706998,0.0270015619696518,0.0315166890261371,0.0198853208757352,0.0133712504254193,0.0150402629585353,-0.0196174252883055,0.0115888966572408,0.0442957596721727,0.0339200574091789,-0.0146207577580132,-0.0313101741860329,0.0128328148703931,0.0387142553207451,0.013566552689527,-0.0387325120060946,-0.0112607131795039,-0.0604610814407481,-0.0258424999766602,-0.0089423012927472,0.0476622784311049,0.0151165272407163,-0.0835757922283197,-0.00898583618022919,0.0154537235085042,-0.0941735606268089,-0.165186646566528,-0.0696065681022822,0.00979626518637478,-0.0821143357800884,-0.107448957041326,0.0833106825073693,0.0993461726850398,0.0584534626391358,-0.000654933109657141,0.0746057583237929,0.0369396251545973,0.0354571720864503,-0.0192253327088802,0.0616068807663028,0.0191009189729987,-0.0363424281035731,0.0311946867843742,0.0608796441440607,0.0154700528101479,-0.0794545576629583,-0.0517409741247341,0.0683006365566103,-0.04498048170762,0.0895547562726509,0.0382020019024307,0,0.0668522549838624,0.0233001764519494,0.0347373204612935,0.000120161038267064,0.0289614645553882,-0.0112145392349257,-0.016869812369235,-0.020004541096305,-0.0549756677591297,-0.0694206468006466,0.109147093276069,-0.00406371214971124,0.0104482745593952,0.0463745864139229,0.0434054145972269,0.0321637370464258,-0.00667566977471912,-0.06005571781823,0.0405810967386417,0.0118295343526946,0.025052578830836,0.0253509528042861,-0.0181982741871833,0.00565968471034783,0.00893442596469751,0.0511902710722987,0.0127588559560503,0.037971202242846,0.0192123404532487,0.0236097544214926,-0.0133445018989329,0.0516768746518341,-0.029992368010418,0.0316463977235975,0.0463067712719825,0.0296376391373137,0.0259264829912864,-0.0352483094963927,0.0455157816259493,0.008295555975534,0.00695154897705219,0.0232063835155925,0.0206448511000332,-0.0134375790462622,0.0394634977794723,-0.0137962591314623,0.0235508955926029,0.0274719623795567,-0.00253659354496361,-0.0296292400092916,0.0562046276176229,-0.0157057199451436,0.00983390666914907,0.0128561781881484,-0.0203121265350991,0.0225892629137101,-0.0609501622370757,-0.0255159139167823,0.0850596673143691,0.00365511410246633,-0.0172824641885319,-0.0497866641753395,-0.000825946969782443,0.0672661188021606,0.00394121485625987,0.0170114993023756,0.00347585930510119,0.0364713013692521,-0.000829023922316097)
eq_dt<-c('2006-08-30','2006-09-29','2006-10-30','2006-11-29','2006-12-30','2007-01-30','2007-02-27','2007-03-30','2007-04-29','2007-05-30','2007-06-29','2007-07-30','2007-08-30','2007-09-29','2007-10-30','2007-11-29','2007-12-30','2008-01-30','2008-02-28','2008-03-30','2008-04-29','2008-05-30','2008-06-29','2008-07-30','2008-08-30','2008-09-29','2008-10-30','2008-11-29','2008-12-30','2009-01-30','2009-02-27','2009-03-30','2009-04-29','2009-05-30','2009-06-29','2009-07-30','2009-08-30','2009-09-29','2009-10-30','2009-11-29','2009-12-30','2010-01-30','2010-02-27','2010-03-30','2010-04-29','2010-05-30','2010-06-29','2010-07-30','2010-08-30','2010-09-29','2010-10-30','2010-11-29','2010-12-30','2011-01-30','2011-02-27','2011-03-30','2011-04-29','2011-05-30','2011-06-29','2011-07-30','2011-08-30','2011-09-29','2011-10-30','2011-11-29','2011-12-30','2012-01-30','2012-02-28','2012-03-30','2012-04-29','2012-05-30','2012-06-29','2012-07-30','2012-08-30','2012-09-29','2012-10-30','2012-11-29','2012-12-30','2013-01-30','2013-02-27','2013-03-30','2013-04-29','2013-05-30','2013-06-29','2013-07-30','2013-08-30','2013-09-29','2013-10-30','2013-11-29','2013-12-30','2014-01-30','2014-02-27','2014-03-30','2014-04-29','2014-05-30','2014-06-29','2014-07-30','2014-08-30','2014-09-29','2014-10-30','2014-11-29','2014-12-30','2015-01-30','2015-02-27','2015-03-30','2015-04-29','2015-05-30','2015-06-29','2015-07-30','2015-08-30','2015-09-29','2015-10-30','2015-11-29','2015-12-30','2016-01-30','2016-02-28','2016-03-30','2016-04-29','2016-05-30','2016-06-29','2016-07-30','2016-08-30')

returns_equities<-xts(eq_n, order.by=as.Date(eq_dt))

b_n<-c(0.0159096095479581,0.0101152745846473,0.00685746796846698,0.0106191446188812,-0.00600489388043146,-0.000702099519810706,0.0162540801671418,-0.00195104818934322,0.00589751482361489,-0.00917276846285242,-0.00376784387801732,0.0107312313834027,0.0127943481774919,0.00632851410821367,0.0100797469120928,0.0180352271741389,-9.28299637099617e-05,0.0231294554873673,-0.00160053160917606,0.00129699364472979,0.00327583409279808,-0.012652273871695,-0.00184927292607517,0.00393943815911868,0.00741944877129441,-0.0175974387178617,-0.022810556566135,0.0302427495997561,0.0666241590023706,-0.0198656472736346,-0.0105537985688346,0.011029955173584,0.00515227662638362,0.0070969744393834,0.00420762871814251,0.0126904823030987,0.0122024850731302,0.011881846801469,0.00221844524194492,0.0128629386471328,-0.0188122545385108,0.0141486235298611,0.00198425426557902,-6.72205042689944e-05,0.00973255909524129,0.0108243769778948,0.0176873563441726,0.00854719189158426,0.0128676976626685,7.36872979718584e-05,0.00152236475068079,-0.00834921132440847,-0.00675409607673572,-0.000851071713973361,0.0029048041073918,-0.00223038103208073,0.0156748915007339,0.0123983070832603,-0.00445187863681662,0.0168664111443952,0.0152048655806374,0.00770582951268484,0.00126486467049292,-0.00330778380309726,0.0135671644777964,0.00725625282022024,-0.000135402321873257,-0.0057294002240732,0.00905962925180681,0.0107818624339715,-0.000197570039378148,0.0136211165093947,1.47878833400839e-07,0.00266591978008246,-0.000472140820534928,0.00270669528308121,-0.00245224360983298,-0.0062117386185534,0.00590854797107787,0.000985356856707087,0.0096859191672114,-0.020011161736786,-0.0156544711709462,0.00269134830449236,-0.00826373906208189,0.0112063177440667,0.00832639504710686,-0.0025067151067828,-0.00556746899278993,0.0154092055156865,0.0037639248471466,-0.00148039443046855,0.00821677203657845,0.0117905888155525,-0.00057554006614613,-0.00250909984307446,0.0114964194039098,-0.0061484156943441,0.0106407701754874,0.00657024365598957,0.00147613875226527,0.0205229874769748,-0.00894795766385215,0.00374724724407627,-0.00322778376373634,-0.00437406756499081,-0.0107671682414323,0.00862164797436948,-0.00335810022802452,0.00811427433593082,0.000685616708377301,-0.00389068471728005,-0.00191707244573169,0.0124062252900172,0.00887077032125783,0.00874682418737827,0.00254949515872505,0.000135533667371845,0.0193516341479336,0.00544439571530742,-0.00233122035202193)
b_dt<-c('2006-08-30','2006-09-29','2006-10-30','2006-11-29','2006-12-30','2007-01-30','2007-02-27','2007-03-30','2007-04-29','2007-05-30','2007-06-29','2007-07-30','2007-08-30','2007-09-29','2007-10-30','2007-11-29','2007-12-30','2008-01-30','2008-02-28','2008-03-30','2008-04-29','2008-05-30','2008-06-29','2008-07-30','2008-08-30','2008-09-29','2008-10-30','2008-11-29','2008-12-30','2009-01-30','2009-02-27','2009-03-30','2009-04-29','2009-05-30','2009-06-29','2009-07-30','2009-08-30','2009-09-29','2009-10-30','2009-11-29','2009-12-30','2010-01-30','2010-02-27','2010-03-30','2010-04-29','2010-05-30','2010-06-29','2010-07-30','2010-08-30','2010-09-29','2010-10-30','2010-11-29','2010-12-30','2011-01-30','2011-02-27','2011-03-30','2011-04-29','2011-05-30','2011-06-29','2011-07-30','2011-08-30','2011-09-29','2011-10-30','2011-11-29','2011-12-30','2012-01-30','2012-02-28','2012-03-30','2012-04-29','2012-05-30','2012-06-29','2012-07-30','2012-08-30','2012-09-29','2012-10-30','2012-11-29','2012-12-30','2013-01-30','2013-02-27','2013-03-30','2013-04-29','2013-05-30','2013-06-29','2013-07-30','2013-08-30','2013-09-29','2013-10-30','2013-11-29','2013-12-30','2014-01-30','2014-02-27','2014-03-30','2014-04-29','2014-05-30','2014-06-29','2014-07-30','2014-08-30','2014-09-29','2014-10-30','2014-11-29','2014-12-30','2015-01-30','2015-02-27','2015-03-30','2015-04-29','2015-05-30','2015-06-29','2015-07-30','2015-08-30','2015-09-29','2015-10-30','2015-11-29','2015-12-30','2016-01-30','2016-02-28','2016-03-30','2016-04-29','2016-05-30','2016-06-29','2016-07-30','2016-08-30')

returns_bonds<-xts(b_n, order.by=as.Date(b_dt))


# Create an iteration grid
grid <- seq(from = 0, to = 1, by = 0.01)

# Initialize an empty vector for sharpe ratios
vsharpe <- rep(NA, times = length(grid) )

# Create a for loop to calculate Sharpe ratios
for(i in 1:length(grid)) {
	weight <- grid[i]
	preturns <- weight * returns_equities + (1 - weight) * returns_bonds
	vsharpe[i] <- SharpeRatio.annualized(preturns)
}

# Plot weights and Sharpe ratio
plot(grid,vsharpe, xlab = "Weights", ylab= "Ann. Sharpe ratio")
abline(v = grid[vsharpe == max(vsharpe)], lty = 3)


## prepare data for returns xts object

r_dt<-c('2006-08-30','2006-09-29','2006-10-30','2006-11-29','2006-12-30','2007-01-30','2007-02-27','2007-03-30','2007-04-29','2007-05-30','2007-06-29','2007-07-30','2007-08-30','2007-09-29','2007-10-30','2007-11-29','2007-12-30','2008-01-30','2008-02-28','2008-03-30','2008-04-29','2008-05-30','2008-06-29','2008-07-30','2008-08-30','2008-09-29','2008-10-30','2008-11-29','2008-12-30','2009-01-30','2009-02-27','2009-03-30','2009-04-29','2009-05-30','2009-06-29','2009-07-30','2009-08-30','2009-09-29','2009-10-30','2009-11-29','2009-12-30','2010-01-30','2010-02-27','2010-03-30','2010-04-29','2010-05-30','2010-06-29','2010-07-30','2010-08-30','2010-09-29','2010-10-30','2010-11-29','2010-12-30','2011-01-30','2011-02-27','2011-03-30','2011-04-29','2011-05-30','2011-06-29','2011-07-30','2011-08-30','2011-09-29','2011-10-30','2011-11-29','2011-12-30','2012-01-30','2012-02-28','2012-03-30','2012-04-29','2012-05-30','2012-06-29','2012-07-30','2012-08-30','2012-09-29','2012-10-30','2012-11-29','2012-12-30','2013-01-30','2013-02-27','2013-03-30','2013-04-29','2013-05-30','2013-06-29','2013-07-30','2013-08-30','2013-09-29','2013-10-30','2013-11-29','2013-12-30','2014-01-30','2014-02-27','2014-03-30','2014-04-29','2014-05-30','2014-06-29','2014-07-30','2014-08-30','2014-09-29','2014-10-30','2014-11-29','2014-12-30','2015-01-30','2015-02-27','2015-03-30','2015-04-29','2015-05-30','2015-06-29','2015-07-30','2015-08-30','2015-09-29','2015-10-30','2015-11-29','2015-12-30','2016-01-30','2016-02-28','2016-03-30','2016-04-29','2016-05-30','2016-06-29','2016-07-30','2016-08-30')
r_eq<-c(0.0218224207706998,0.0270015619696518,0.0315166890261374,0.019885320875735,0.0133712504254193,0.0150402629585356,-0.0196174252883055,0.0115888966572411,0.0442957596721727,0.0339200574091789,-0.0146207577580131,-0.0313101741860328,0.0128328148703931,0.0387142553207451,0.0135665526895268,-0.0387325120060946,-0.0112607131795039,-0.060461081440748,-0.0258424999766601,-0.0089423012927472,0.0476622784311049,0.0151165272407163,-0.0835757922283198,-0.00898583618022908,0.0154537235085042,-0.0941735606268089,-0.165186646566528,-0.0696065681022822,0.00979626518637478,-0.0821143357800884,-0.107448957041326,0.0833106825073693,0.0993461726850398,0.0584534626391358,-0.00065493310965703,0.0746057583237929,0.0369396251545973,0.0354571720864503,-0.0192253327088803,0.0616068807663028,0.0191009189729985,-0.0363424281035731,0.0311946867843742,0.0608796441440607,0.0154700528101479,-0.0794545576629583,-0.051740974124734,0.0683006365566103,-0.04498048170762,0.0895547562726509,0.0382020019024307,0,0.0668522549838624,0.0233001764519494,0.0347373204612933,0.000120161038267286,0.0289614645553882,-0.0112145392349257,-0.016869812369235,-0.0200045410963049,-0.0549756677591295,-0.0694206468006466,0.109147093276069,-0.00406371214971124,0.010448274559395,0.0463745864139229,0.0434054145972269,0.0321637370464258,-0.00667566977471912,-0.0600557178182299,0.0405810967386417,0.0118295343526946,0.0250525788308358,0.0253509528042861,-0.0181982741871833,0.00565968471034783,0.00893442596469751,0.0511902710722987,0.0127588559560503,0.037971202242846,0.0192123404532487,0.0236097544214926,-0.0133445018989328,0.0516768746518339,-0.029992368010418,0.0316463977235975,0.0463067712719825,0.0296376391373137,0.0259264829912864,-0.0352483094963927,0.045515781625949,0.008295555975534,0.00695154897705219,0.0232063835155925,0.0206448511000334,-0.0134375790462623,0.0394634977794726,-0.0137962591314623,0.0235508955926029,0.0274719623795567,-0.00253659354496361,-0.0296292400092916,0.0562046276176229,-0.0157057199451435,0.00983390666914907,0.0128561781881484,-0.0203121265350991,0.0225892629137101,-0.0609501622370757,-0.0255159139167823,0.0850596673143693,0.00365511410246633,-0.0172824641885319,-0.0497866641753396,-0.000825946969782443,0.0672661188021608,0.00394121485625987,0.0170114993023756,0.00347585930510119,0.0364713013692521,-0.000829023922316208)
r_fi<-c(0.0159096095479581,0.0101152745846473,0.00685746796846698,0.0106191446188815,-0.00600489388043168,-0.000702099519810595,0.0162540801671418,-0.00195104818934322,0.00589751482361511,-0.00917276846285242,-0.00376784387801732,0.0107312313834027,0.0127943481774919,0.00632851410821345,0.010079746912093,0.0180352271741389,-9.28299637099617e-05,0.0231294554873673,-0.00160053160917595,0.00129699364472979,0.0032758340927983,-0.0126522738716951,-0.00184927292607517,0.00393943815911868,0.00741944877129463,-0.0175974387178617,-0.022810556566135,0.0302427495997561,0.0666241590023706,-0.0198656472736347,-0.0105537985688346,0.011029955173584,0.00515227662638362,0.0070969744393834,0.00420762871814251,0.0126904823030987,0.0122024850731302,0.011881846801469,0.00221844524194492,0.0128629386471328,-0.0188122545385108,0.0141486235298611,0.00198425426557902,-6.72205042691054e-05,0.00973255909524129,0.0108243769778948,0.0176873563441726,0.00854719189158448,0.0128676976626685,7.36872979718584e-05,0.00152236475068079,-0.00834921132440847,-0.00675409607673561,-0.000851071713973361,0.00290480410739202,-0.00223038103208084,0.0156748915007339,0.0123983070832603,-0.00445187863681662,0.0168664111443955,0.0152048655806374,0.00770582951268506,0.00126486467049292,-0.00330778380309715,0.0135671644777962,0.00725625282022024,-0.000135402321873368,-0.00572940022407309,0.00905962925180681,0.0107818624339713,-0.000197570039378148,0.0136211165093947,1.47878833400839e-07,0.00266591978008246,-0.000472140820534928,0.00270669528308121,-0.00245224360983298,-0.0062117386185534,0.00590854797107787,0.000985356856707087,0.0096859191672114,-0.0200111617367861,-0.0156544711709461,0.00269134830449236,-0.00826373906208178,0.0112063177440667,0.00832639504710686,-0.0025067151067828,-0.00556746899279004,0.0154092055156865,0.00376392484714683,-0.00148039443046855,0.00821677203657845,0.0117905888155525,-0.00057554006614613,-0.00250909984307435,0.0114964194039098,-0.00614841569434399,0.0106407701754871,0.00657024365598957,0.00147613875226527,0.020522987476975,-0.00894795766385215,0.00374724724407627,-0.00322778376373634,-0.00437406756499081,-0.0107671682414323,0.00862164797436948,-0.00335810022802441,0.00811427433593104,0.000685616708377301,-0.00389068471727994,-0.0019170724457318,0.0124062252900174,0.00887077032125783,0.00874682418737827,0.00254949515872482,0.000135533667371845,0.0193516341479338,0.00544439571530742,-0.00233122035202205)
r_re<-c(0.034843251648397,0.019659068021493,0.0602776831563721,0.0478125023966189,-0.0184256285044455,0.0877922259579178,-0.0269818930119569,-0.0207492164455139,-0.00126022217846777,-0.00378558988141142,-0.0900773293997673,-0.0825934270803435,0.0674452515165964,0.0391726002948358,0.0209907596812906,-0.0947093498674502,-0.0541298206062277,-0.00780995037966092,-0.0318136923090589,0.0648528556115169,0.0637922881939033,-0.00210935744141194,-0.106153981558385,0.0311537702515958,0.0237383517022862,-0.00123726407521707,-0.317269728815346,-0.227174136331548,0.167109296140377,-0.175308708161198,-0.205256162714022,0.0364142877005951,0.306836881533382,0.0261582348284126,-0.0319702843411697,0.107707210517668,0.143231475267391,0.0659276016347681,-0.044632099957671,0.0656565098894357,0.0738678408225832,-0.0552079563349819,0.0558315812544719,0.101867610900601,0.0715017084491105,-0.0533461265588403,-0.0521227437296425,0.0959345916714029,-0.0127575958268249,0.0447071056083681,0.0474270744343495,-0.0185151620577422,0.0455070042235346,0.0325085621175438,0.0470527373469138,-0.0161066989927319,0.0574653394060896,0.0137473299542425,-0.0329926160199757,0.0156406772781059,-0.0561926882227866,-0.108419346271301,0.142913376012864,-0.0380117203405003,0.0485035135852079,0.0637931102332439,-0.0115072715624736,0.0520015412993962,0.0285938613871584,-0.0450588187689203,0.0551706668493004,0.0200213597589294,-0.00014977488340906,-0.0186319737232439,-0.00908113927141374,-0.00264055884913539,0.037227378109111,0.0373860281378269,0.0121592620964079,0.0287216370524359,0.0673471937975116,-0.0597768319349344,-0.0198188582005041,0.00902207332542249,-0.0698009630247098,0.0348185569636461,0.0452070894178465,-0.052509726766765,0.00101866148841778,0.0427509498098917,0.0506536404842242,0.00496889162387371,0.0328518138636746,0.0239923736123573,0.0113414159816581,0.000801781640850319,0.0304404897903112,-0.0604056275058695,0.0993736913632277,0.020002496294109,0.0190392948493998,0.0685185587009038,-0.0367417636925558,0.017318988678716,-0.0584746896742036,-0.00302339814019303,-0.0466862738544387,0.0577051182503603,-0.0629114402964204,0.0305959573588288,0.0575853502479322,-0.00625855642656692,0.0183098975757408,-0.0343660455662933,-0.00363686574954547,0.10465410632807,-0.0235082839246491,0.0224855360901794,0.069284390241231,0.0426299810948709,0.00216337492544016)
r_cmd<-c(-0.0713300295566502,-0.107362632986152,-0.0254338008081769,0.049999975609756,-0.0692218134546299,-0.0254554779136511,0.0371319087613806,0.0246913580246912,0.00457828915662661,-0.01175337039466,0.0313107031235267,0.0477758979630081,-0.0318958221024258,0.0944315589063367,0.0599958049606024,-0.00459999999999994,0.0596745428973275,-0.00455066346034627,0.112571428571428,-0.00941617873651768,0.0819218271358135,0.0846646033439171,0.103240085324298,-0.133226584796338,-0.0748498382873866,-0.10437824205094,-0.296654262019596,-0.148784381606765,-0.111766473510291,-0.103460359893032,-0.0612085769980508,0.0456810631229236,-0.015488443208896,0.215006042153851,-0.00232410350849588,0.00732116496909052,0.00429468120251064,-0.0236842105263158,0.0481806266846361,0.0128575694999176,0.00983814662012072,-0.0810810810810813,0.0591654924760603,0.00613500181256055,0.0314505455712453,-0.135967614684742,0.000720237666546719,0.0575745931063478,-0.0547804714113805,0.0802735392270144,0.0289903032322558,0.0123057322637867,0.0908508637236085,0.0310851044624694,0.0264505119453926,0.0349126627874756,0.0425703101777943,-0.0685670022744478,-0.0595533223049355,0.0316622095672177,-0.0170502704475778,-0.127204365423533,0.102683004217191,0.0150195249318257,-0.0239716181127074,0.0239539114614922,0.062185342019544,-0.0303875113015756,-0.00345023011645285,-0.127813040969417,0.00694677472709238,0.0588041702101125,0.0716723859757991,-0.0214244927207732,-0.0402366875809671,0.0160295935890751,-0.00515770646716363,0.0457456527677447,-0.0510352857674167,0.0110633370908626,-0.0489361976330579,-0.0153404277615714,-0.00032456995535779,0.0564935732627783,0.0310386591567715,-0.0348732648248364,-0.0145151632330093,-0.00470072077718575,0.0135390113350127,-0.0220565089175678,0.0479670266836085,-0.000606274591920197,0.0100090382162863,-0.00510504519834976,0.0238453660173448,-0.0566037179601249,-0.015625,-0.0606349206349207,-0.0594795539033458,-0.10097017606899,-0.137490007993605,-0.0871176552363299,0.059390859929398,-0.0656445105105649,0.109230717948718,-0.0217290347540008,-0.00236290170132325,-0.141639026923779,0.00275932655853617,-0.0599889928453496,-0.000585480093676649,-0.0913884007029877,-0.0825274016763379,-0.0527055516514405,-0.0207715133531158,0.0446969696969695,0.103698332124728,0.0131406044678055,0.00648508430609596,-0.100515463917526,-0.0207736389684814)
dt<-data.frame(equities=r_eq, bonds=r_fi, realestate=r_re, commodities=r_cmd)
returns<-xts(dt, order.by=as.Date(r_dt))

